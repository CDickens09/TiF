<!DOCTYPE html>
<html>
	<body>
	<script src="https://stuk.github.io/jszip/dist/jszip.js"></script>
	<script src="https://stuk.github.io/jszip/vendor/FileSaver.js"></script>
		<div id="Test"></div>

		<script>
			myFunction();
			function myFunction() 
			{
				var file = new XMLHttpRequest();
				file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00001.xml", false);
				file.send();
				var xmlDoc = file.responseXML;
				qno = 10;
				for(i = 1; i < qno; i++)
				{
					xmlDoc.getElementsByTagName("section")[0].appendChild(xmlDoc.getElementsByTagName("item")[0].cloneNode(true));
					xmlDoc.getElementsByTagName("mat_formattedtext")[(3 * i) - 1].innerHTML = "Question";
					xmlDoc.getElementsByTagName("varequal")[i].innerHTML = "Numerical Answer";
					xmlDoc.getElementsByTagName("vargte")[i].innerHTML = "Numerical Answer - Error";
					xmlDoc.getElementsByTagName("varlte")[i].innerHTML = "Numerical Answer + Error";
				}
				for(i = 0; i < xmlDoc.getElementsByTagName("mat_formattedtext").length; i++)
				{
					document.getElementById("Test").innerHTML += xmlDoc.getElementsByTagName("mat_formattedtext")[i].innerHTML;
					console.log(xmlDoc.getElementsByTagName("mat_formattedtext")[i].innerHTML);
				}
				var Output = new XMLSerializer().serializeToString(xmlDoc);
				console.log(Output);
				var zip = new JSZip();
				zip.file("res00001.dat", Output);
				file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00002.dat", false);
				file.send();
				zip.file("res00002.dat", file.responseText);
				file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00003.dat", false);
				file.send();
				zip.file("res00003.dat", file.responseText);
				file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00004.dat", false);
				file.send();
				zip.file("res00004.dat", file.responseText);
				file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00005.dat", false);
				file.send();
				zip.file("res00005.dat", file.responseText);
				file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/bb-package-info.txt", false);
				file.send();
				zip.file(".bb-package-info", file.responseText);
				file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/imsmanifest.xml", false);
				file.send();
				zip.file("imsmanifest.xml", file.responseText);
				zip.generateAsync({type:"blob"})
				.then(function (blob) 
				{
					saveAs(blob, "test.zip");
				});
			}
		</script>
	</body>
</html>
