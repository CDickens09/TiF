<!DOCTYPE html>
<html>
    <head>
		<title>TiF</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://chris14552249.github.io/TiF/generalstyle.css">
		<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="https://unpkg.com/marked@0.3.6"></script>
		<script src="https://unpkg.com/lodash@4.16.0"></script>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
		<script src="https://stuk.github.io/jszip/dist/jszip.js"></script>
		<script src="https://stuk.github.io/jszip/vendor/FileSaver.js"></script>
		<style>
		</style>
	</head>

	<body>
		<!-- Placeholder and script to load navbar -->
		<div id="navigation-placeholder"></div>
		<script>
		$(function()
		{
			$("#navigation-placeholder").load("https://chris14552249.github.io/TiF/navigation.html");
		});
		</script>
		
		<!-- Header for page and link to instructions -->
		<div class="header">
			<h1>BlackBoard Question Pool Maker</h1>
			<p>
				To view instructions please visit the <a href="/TiF/Help">Help</a> page 
			</p>
		</div>
		
		<div class="tab">
			<button class="tablinks" id="Previews Button" onclick="openTab(event, 'Previews')">Previews</button>
  			<button class="tablinks" id="Random Variables Button" onclick="openTab(event, 'Random Variables')">Random Variables</button>
  			<button class="tablinks" id="CSV Variables Button" onclick="openTab(event, 'CSV Variables')">CSV Variables</button>	
		</div>
		
		<div id="Previews" class="tabcontent">
			<div class="row">
				Variable set to use: 
				<!-- Select box to let user decide which variables to use-->
				<select id="VarSet" onchange="update()">
  					<option value="Rand">Random Variables</option>
  					<option value="CSV">CSV variables</option>
				</select>
			</div>
			
			<div class="row">
				<!-- Button to save questions for later -->
				<input id="SaveButton" type="button" value="Save Inputs" onclick="SaveQs();" />
				<!-- Input form to upload question file-->
				<input type="file" id="Qs" onchange="LoadQs()"/>
			</div>
			
			<div class="row">
				<div class="titlerow">
					Pool Title: 
					<!-- Input form to let user decide on a pool title-->
					<textarea id = "TInput"></textarea>
				</div>
			</div>
			
			<!-- Row to show question box headers-->
			<div class="row">
				<div class="column iheaders">
					Question:
				</div>
				<div class="column iheaders">
					Question Preview:
				</div>
			</div>

			<!-- Row to show question boxs-->
			<div class="row">
				<div class="column inputs">
					<div id="questions">
						<textarea id = "QInput" oninput="update()"></textarea>
						<div id = "QMarked" style="overflow:auto"></div>
					</div>
				</div>
			</div>

			<!-- Row to show written answer headers-->
			<div class="row">
				<div class="column iheaders">
					Incorrect Answer Feedback:
				</div>
				<div class="column iheaders">
					Answer Preview:
				</div>
			</div>
			
			<!-- Row to show written answer boxes-->
			<div class="row">
				<div class="column inputs">
					<div id="answers">
						<textarea id = "IFInput" oninput="update()"></textarea>
						<div id = "AIMarked" style="overflow:auto"></div>
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="column iheaders">
					Correct Answer Feedback:
				</div>
				<div class="column iheaders">
					Answer Preview:
				</div>
			</div>
			
			<!-- Row to show written answer boxes-->
			<div class="row">
				<div class="column inputs">
					<div id="answers">
						<textarea id = "CFInput" oninput="update()"></textarea>
						<div id = "ACMarked" style="overflow:auto"></div>
					</div>
				</div>
			</div>
			
			<!-- Row to show numerical answer and error-->
			<div class="row">
				<div class="column nheaders">
					Numerical Answer:
				</div>
				<div class="column nheaders">
					Accepted Error: (&#177)
				</div>
				<div class="column nheaders">
					Answer Preview:
				</div>
			</div>
			
			<!-- Row to show numerical answer and error boxs-->
			<div class="row">
				<div class="column inputs">
					<div id="numerical">
						<textarea class="numerical" id = "ANInput" oninput="update()"></textarea>
						<textarea class="numerical" id = "EInput" oninput="update()"></textarea>
						<div class="numerical" id = "ANMarked" style="overflow:auto"></div>
					</div>
				</div>
			</div>
			
			<div class="row">
				<!-- Button to initiate download -->
				<input id="DownloadButton" type="button" value="Download Output" onclick="OutputFile();" />
			</div>
		</div>
		
		<div id="Random Variables" class="tabcontent">
			<!-- Row to show variable heading-->
			<div class="row">
				<div class="settings">
					Number of Variables:
				</div>
			</div>

			<!-- Row to show number of variables-->
			<div class="row">
				<div class="settings">
					<input type="number" id="NumVar" value="1" oninput="updatevar(this)" min ="1" max="10">				
				</div>
			</div>

			<!-- Row for variable names to be set in-->
			<div class="row" id="Variable headers">
				<div class="settings" id="Var1head" style="display:none;">
					Variable Placeholder:
					<input type="text" id="Var1name" value="Var1">
				</div>
				<div class="settings" id="Var2head" style="display:none;">
					Variable Placeholder:
					<input type="text" id="Var2name" value="Var2">
				</div>
				<div class="settings" id="Var3head" style="display:none;">
					Variable Placeholder:
					<input type="text" id="Var3name" value="Var3">
				</div>
				<div class="settings" id="Var4head" style="display:none;">
					Variable Placeholder:
					<input type="text" id="Var4name" value="Var4">
				</div>
				<div class="settings" id="Var5head" style="display:none;">
					Variable Placeholder:
					<input type="text" id="Var5name" value="Var5">
				</div>
				<div class="settings" id="Var6head" style="display:none;">
					Variable Placeholder:
					<input type="text" id="Var6name" value="Var6">
				</div>
				<div class="settings" id="Var7head" style="display:none;">
					Variable Placeholder:
					<input type="text" id="Var7name" value="Var7">
				</div>
				<div class="settings" id="Var8head" style="display:none;">
					Variable Placeholder:
					<input type="text" id="Var8name" value="Var8">
				</div>
				<div class="settings" id="Var9head" style="display:none;">
					Variable Placeholder:
					<input type="text" id="Var9name" value="Var9">
				</div>
				<div class="settings" id="Var10head" style="display:none;">
					Variable Placeholder:
					<input type="text" id="Var10name" value="Var10">
				</div>
			</div>

			<!-- Row for variable mins to be set in-->
			<div class="row" id="Variable mins">
				<div class="settings" id="Var1min" style="display:none;">
					Min: 
					<input type="number" id="Var1minval" value="0">
				</div>
				<div class="settings" id="Var2min" style="display:none;">
					Min: 
					<input type="number" id="Var2minval" value="0">
				</div>
				<div class="settings" id="Var3min" style="display:none;">
					Min: 
					<input type="number" id="Var3minval" value="0">
				</div>
				<div class="settings" id="Var4min" style="display:none;">
					Min: 
					<input type="number" id="Var4minval" value="0">
				</div>
				<div class="settings" id="Var5min" style="display:none;">
					Min: 
					<input type="number" id="Var5minval" value="0">
				</div>
				<div class="settings" id="Var6min" style="display:none;">
					Min: 
					<input type="number" id="Var6minval" value="0">
				</div>
				<div class="settings" id="Var7min" style="display:none;">
					Min: 
					<input type="number" id="Var7minval" value="0">
				</div>
				<div class="settings" id="Var8min" style="display:none;">
					Min: 
					<input type="number" id="Var8minval" value="0">
				</div>
				<div class="settings" id="Var9min" style="display:none;">
					Min: 
					<input type="number" id="Var9minval" value="0">
				</div>
				<div class="settings" id="Var10min" style="display:none;">
					Min: 
					<input type="number" id="Var10minval" value="0">
				</div>
			</div>

			<!-- Row for variable maxs to be set in-->
			<div class="row" id="Variable maxs">
				<div class="settings" id="Var1max" style="display:none;">
					Max: 
					<input type="number" id="Var1maxval" value="1">
				</div>
				<div class="settings" id="Var2max" style="display:none;">
					Max: 
					<input type="number" id="Var2maxval" value="1">
				</div>
				<div class="settings" id="Var3max" style="display:none;">
					Max: 
					<input type="number" id="Var3maxval" value="1">
				</div>
				<div class="settings" id="Var4max" style="display:none;">
					Max: 
					<input type="number" id="Var4maxval" value="1">
				</div>
				<div class="settings" id="Var5max" style="display:none;">
					Max: 
					<input type="number" id="Var5maxval" value="1">
				</div>
				<div class="settings" id="Var6max" style="display:none;">
					Max: 
					<input type="number" id="Var6maxval" value="1">
				</div>
				<div class="settings" id="Var7max" style="display:none;">
					Max: 
					<input type="number" id="Var7maxval" value="1">
				</div>
				<div class="settings" id="Var8max" style="display:none;">
					Max: 
					<input type="number" id="Var8maxval" value="1">
				</div>
				<div class="settings" id="Var9max" style="display:none;">
					Max: 
					<input type="number" id="Var9maxval" value="1">
				</div>
				<div class="settings" id="Var10max" style="display:none;">
					Max: 
					<input type="number" id="Var10maxval" value="1">
				</div>
			</div>

			<!-- Row for variable decimal accuracies to be set in-->
			<div class="row" id="Variable decs">
				<div class="settings" id="Var1dec" style="display:none;">
					Decimals: 
					<input type="number" id="Var1decval" value="2">
				</div>
				<div class="settings" id="Var2dec" style="display:none;">
					Decimals: 
					<input type="number" id="Var2decval" value="2">
				</div>
				<div class="settings" id="Var3dec" style="display:none;">
					Decimals: 
					<input type="number" id="Var3decval" value="2">
				</div>
				<div class="settings" id="Var4dec" style="display:none;">
					Decimals: 
					<input type="number" id="Var4decval" value="2">
				</div>
				<div class="settings" id="Var5dec" style="display:none;">
					Decimals: 
					<input type="number" id="Var5decval" value="2">
				</div>
				<div class="settings" id="Var6dec" style="display:none;">
					Decimals: 
					<input type="number" id="Var6decval" value="2">
				</div>
				<div class="settings" id="Var7dec" style="display:none;">
					Decimals: 
					<input type="number" id="Var7decval" value="2">
				</div>
				<div class="settings" id="Var8dec" style="display:none;">
					Decimals: 
					<input type="number" id="Var8decval" value="2">
				</div>
				<div class="settings" id="Var9dec" style="display:none;">
					Decimals: 
					<input type="number" id="Var9decval" value="2">
				</div>
				<div class="settings" id="Var10dec" style="display:none;">
					Decimals: 
					<input type="number" id="Var10decval" value="2">
				</div>
			</div>
			
			<div class="row">
				How many questions would you like to output?
				<input type="number" id="NoQuestions" value="10">
			</div>
		</div>
		
		<div id="CSV Variables" class="tabcontent">
			<!-- Input form to upload a CSV to-->
			<input type="file" id="CSV" onchange="data()"/>
			<div>Preview of CSV contents:</div>
			<!-- Div to show table format for csv file-->
			<div id="dvCSV"></div>
		</div>

		
		<script>
			updatevar(document.getElementById("NumVar"));
			
			// Sets initial number of variables to 0
			var numvar = 0;
			
			// Has Previews screen open on first page load by default
			document.getElementById("Previews Button").click();
			
			// Declares variables as a global variable
			var variables;
			
			// Declares ranvariables as a global variable
			var ranvariables;
			
			// Declares loaded variable as a break option for numvar selector if file loaded
			var loaded = false;
			
			// Sets up variable to store time since save
			var SaveTime = 0;
			
			// Function to load data from file and display it in a table below the import box
			function data() 
			{
				// Brings in CSV file from upload point
				var fileUpload = document.getElementById("CSV");
				// Variable to store all legal characters
				var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.csv|.txt)$/;
				// Checks that all characters in CSV are legal for use in conversion
				if (regex.test(fileUpload.value.toLowerCase())) 
				{
					// Checks if the browser supports HTML5
					if (typeof (FileReader) != "undefined") 
					{
						// Defines reader variable as a file reader
						var reader = new FileReader();
						// Whenever reader function is loaded calls the below function
						reader.onload = function (e) 
						{
							// Creates a div table for displaying content of file
							var table = document.createElement("table");
							// Splits input of CSV file into rows
							var rows = e.target.result.split("\n");
							if(rows.length > 1)
							{
								// Assigns variable to store data from CSV
								variables = new Array(rows.length - 1);
								// For loop to run for every row
								for (var i = 0; i < rows.length; i++) 
								{
									// Inserts each row element into the div table
									var row = table.insertRow(-1);
									// Splits the row into each individual cell by the commas
									var cells = rows[i].split(",");
									if (cells.length > 2)
									{
										// Set each row in array to have the correct number of columns
										variables[i] = new Array(cells.length - 2);
										// For loop to run for every cell
										for (var j = 0; j < cells.length; j++) 
										{
											// Inserts each cell element into row
											var cell = row.insertCell(-1);
											// Adds html element for each cell with text from CSV
											cell.innerHTML = cells[j];
											variables[i][j] = cells[j];
										}
									}
								}
							}
							// Finds where to display table on page
							var dvCSV = document.getElementById("dvCSV");
							dvCSV.innerHTML = "";
							// Appends table to the display element on page
							dvCSV.appendChild(table);
						}
						reader.readAsText(fileUpload.files[0]);
					} 
					else 
					{
						// Alert if the browser user is using cannot support HTML5
						alert("Sorry this browser does not support HTML5, please use a more up to date browser for this feature");
					}
				} 
				else 
				{
					// Error line if uploaded file is not a valid csv format or has illegal characters
					alert("Please upload a valid CSV file");
				}
			}
			
			// Function to load question data from earlier
			function LoadQs()
			{
				// Brings in user inputted file
				var file = document.getElementById("Qs");
				// Defines reader variable as a file reader
				var reader = new FileReader();
				reader.onload = function (e) 
				{
					var contents = e.target.result;
					// Searches contents for the title break
					var index = contents.search("TITLE BREAK");
					// Sets TInput to the content before title break
					var TInput = contents.substr(0, index);
					// Sets TInput box to hold title from file
					document.getElementById("TInput").value = TInput;
					// Sets contents to the content after title break
					contents = contents.substr(index + 11);
					// Searches contents for the question break
					var index = contents.search("QUESTION BREAK");
					// Sets QInput to the content before question break
					var QInput = contents.substr(0, index);
					// Sets QInput box to hold question from file
					document.getElementById("QInput").value = QInput;
					// Sets contents to the content after question break
					contents = contents.substr(index + 14);
					// Searches contents for the Ianswer break
					index = contents.search("IANSWER BREAK");
					// Sets IFInput to the content before answer break
					var IFInput = contents.substr(0, index);
					// Sets IFInput box to hold answer from file
					document.getElementById("IFInput").value = IFInput;
					// Sets contents to the content after answer break
					contents = contents.substr(index + 13);
					// Searches contents for the canswer break
					index = contents.search("CANSWER BREAK");
					// Sets CFInput to the content before answer break
					var CFInput = contents.substr(0, index);
					// Sets CFInput box to hold answer from file
					document.getElementById("CFInput").value = CFInput;
					// Sets contents to the content after answer break
					contents = contents.substr(index + 13);
					// Searches contents for the numerical break
					index = contents.search("NUMERICAL BREAK");
					// Sets ANInput to the content before numerical break
					var ANInput = contents.substr(0, index);
					// Sets ANInput box to hold numerical answer from file
					document.getElementById("ANInput").value = ANInput;
					// Sets contents to the content after numerical break
					contents = contents.substr(index + 15);
					// Searches contents for the numerical break
					index = contents.search("ERROR BREAK");
					// Sets ANInput to the content before error break
					var EInput = contents.substr(0, index);
					// Sets EInput box to hold numerical answer from file
					document.getElementById("EInput").value = EInput;
					// Sets contents to the content after error break
					contents = contents.substr(index + 11);
					// Searches contents for the first space
					index = contents.search(" ");
					// Sets content before space to go into the numvar value
					document.getElementById("NumVar").value = contents.substr(0, index);
					numvar = contents.substr(0,index);
					for(i = 1; i <= numvar; i++)
					{
						// Sets contents to the content after space break
						contents = contents.substr(index + 1);
						// Searches contents for the first space
						index = contents.search(" ");
						// Sets placeholder for random variables
						document.getElementById("Var" + i + "name").value = contents.substr(0, index);
						// Sets contents to the content after space break
						contents = contents.substr(index + 1);
						// Searches contents for the first space
						index = contents.search(" ");
						// Sets min for random variables
						document.getElementById("Var" + i + "minval").value = contents.substr(0, index);
						// Sets contents to the content after space break
						contents = contents.substr(index + 1);
						// Searches contents for the first space
						index = contents.search(" ");
						// Sets max for random variables
						document.getElementById("Var" + i + "maxval").value = contents.substr(0, index);
						// Sets contents to the content after space break
						contents = contents.substr(index + 1);
						// Searches contents for the first space
						index = contents.search(" ");
						// Sets accuracy for random variables
						document.getElementById("Var" + i + "decval").value = contents.substr(0, index);
					}
					loaded = true;
					// Runs updatevar to get the output boxes converted
					updatevar(document.getElementById("NumVar"));
				}
				reader.readAsText(file.files[0]);
			}
			
			// Function to open each tab
			function openTab(evt, tabName) 
			{
				var i, tabcontent, tablinks;
				// Sets tab content variable to hold ids of the tabs
				tabcontent = document.getElementsByClassName("tabcontent");
				// For loop to hide all tabs
				for (i = 0; i < tabcontent.length; i++) 
				{
					tabcontent[i].style.display = "none";
				}
				tablinks = document.getElementsByClassName("tablinks");
				// For loop to remove active tab status from every tab
				for (i = 0; i < tablinks.length; i++) 
				{
					tablinks[i].className = tablinks[i].className.replace(" active", "");
				}
				// Sets the desired tab to visible
				document.getElementById(tabName).style.display = "block";
				evt.currentTarget.className += " active";
			}
			
			// Function to output data for blackboard upload
			function OutputFile()
			{
				// Runs an update to make sure no changes have been missed
				update();
				// Sets file as request for xml file
				var file = new XMLHttpRequest();
				file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00001.xml", false);
				file.send();
				// Saves response as xmlDoc
				var xmlDoc = file.responseXML;
				// Gets title from input box
				var title = document.getElementById("TInput").value;
				xmlDoc.getElementsByTagName("assessment")[0].attributes[0].nodeValue = title;
				// If loop to check if random or CSV variables in use
				if(document.getElementById("VarSet").value == "Rand")
				{
					for(a = 1; a < ranvariables.length; a++)
					{
						// Adds new item node for each question
						xmlDoc.getElementsByTagName("section")[0].appendChild(xmlDoc.getElementsByTagName("item")[0].cloneNode(true));
					}
					// For loop to run for all questions
					for(q = 0; q < ranvariables.length; q++)
					{
						// Brings in current input from question input box and runs markdown conversion
						var qvalue = marked(document.getElementById("QInput").value);
						// Brings in current input from incorrect answer input box and runs markdown conversion
						var ifvalue = marked(document.getElementById("IFInput").value);
						// Brings in current input from correct answer input box and runs markdown conversion
						var cfvalue = marked(document.getElementById("CFInput").value);
						// Brings in current input from numerical answer input box
						var anvalue = document.getElementById("ANInput").value;
						// Brings in current input from error intput box
						var evalue = document.getElementById("EInput").value;
						// Only runs if some variables are present
						if (numvar != 0)
						{
							// For loop to run for all currently active variables
							for (i = 1; i <= numvar; i++) 
							{
								// Looks up the placeholder of each variable being used
								var placeholder = "{{" + document.getElementById("Var" + i + "name").value + "}}";
								// While loop to only run until no more instances of the variable are found in question box
								while (qvalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = qvalue.search(placeholder);
									// Creates new string with random variable added
									qvalue = qvalue.substr(0, index) + ranvariables[q][i] + qvalue.substr(index + placeholder.length);
								}
								// While loop to only run until no more instances of the variable are found in answer box
								while (ifvalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = ifvalue.search(placeholder);
									// Creates new string with random variable added
									ifvalue = ifvalue.substr(0, index) + ranvariables[q][i] + ifvalue.substr(index + placeholder.length);
								}
								// While loop to only run until no more instances of the variable are found in answer box
								while (cfvalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = cfvalue.search(placeholder);
									// Creates new string with random variable added
									cfvalue = cfvalue.substr(0, index) + ranvariables[q][i] + cfvalue.substr(index + placeholder.length);
								}
								// While loop to only run until no more instances of the variable are found in numerical answer box
								while (anvalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = anvalue.search(placeholder);
									// Creates new string with random variable added
									anvalue = anvalue.substr(0, index) + ranvariables[q][i] + anvalue.substr(index + placeholder.length);
								}
								// While loop to only run until no more instances of the variable are found in error box
								while (evalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = evalue.search(placeholder);
									// Creates new string with random variable added
									evalue = evalue.substr(0, index) + ranvariables[q][i] + evalue.substr(index + placeholder.length);
								}
							}
						}
						// While loop to replace all <
						while(qvalue.search("<") !== -1)
						{
							// Finds index for random value identifier
							var index = qvalue.search("<");
							// Creates new string with random variable added
							qvalue = qvalue.substr(0, index) + "&lt;" + qvalue.substr(index + 1);
						}
						// While loop to replace all >
						while(qvalue.search(">") !== -1)
						{
							// Finds index for random value identifier
							var index = qvalue.search(">");
							// Creates new string with random variable added
							qvalue = qvalue.substr(0, index) + "&gt;" + qvalue.substr(index + 1);
						}
						// While loop to replace all <
						while(ifvalue.search("<") !== -1)
						{
							// Finds index for random value identifier
							var index = ifvalue.search("<");
							// Creates new string with random variable added
							ifvalue = ifvalue.substr(0, index) + "&lt;" + ifvalue.substr(index + 1);
						}
						// While loop to replace all >
						while(ifvalue.search(">") !== -1)
						{
							// Finds index for random value identifier
							var index = ifvalue.search(">");
							// Creates new string with random variable added
							ifvalue = ifvalue.substr(0, index) + "&gt;" + ifvalue.substr(index + 1);
						}
						while(cfvalue.search("<") !== -1)
						{
							// Finds index for random value identifier
							var index = cfvalue.search("<");
							// Creates new string with random variable added
							cfvalue = cfvalue.substr(0, index) + "&lt;" + cfvalue.substr(index + 1);
						}
						// While loop to replace all >
						while(cfvalue.search(">") !== -1)
						{
							// Finds index for random value identifier
							var index = cfvalue.search(">");
							// Creates new string with random variable added
							cfvalue = cfvalue.substr(0, index) + "&gt;" + cfvalue.substr(index + 1);
						}
						// Adds question text to xml as well as MathJax
						xmlDoc.getElementsByTagName("mat_formattedtext")[(3 * (q + 1)) - 1].innerHTML = qvalue + '&lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"&gt;&lt;/script&gt;';
						// Adds incorrect answer feedback to xml
						xmlDoc.getElementsByTagName("mat_formattedtext")[(3 * (q + 1)) + 1].innerHTML = ifvalue;
						// Adds correct answer feedback to xml
						xmlDoc.getElementsByTagName("mat_formattedtext")[3 * (q + 1)].innerHTML = cfvalue;
						// Adds answer to xml
						xmlDoc.getElementsByTagName("varequal")[q].innerHTML = eval(anvalue);
						if (evalue.length == 0)
						{
							// Adds answer - error to xml
							xmlDoc.getElementsByTagName("vargte")[q].innerHTML = eval(anvalue);
							// Adds answer + error to xml
							xmlDoc.getElementsByTagName("varlte")[q].innerHTML = eval(anvalue);

						}
						else 
						{
							// Adds answer - error to xml
							xmlDoc.getElementsByTagName("vargte")[q].innerHTML = eval(anvalue) - eval(evalue);
							// Adds answer + error to xml
							xmlDoc.getElementsByTagName("varlte")[q].innerHTML = eval(anvalue) + eval(evalue);
						}
					}
					// Sets output to a string
					var Output = new XMLSerializer().serializeToString(xmlDoc);
					// Sets up zip file
					var zip = new JSZip();
					// Adds output to zip file as res00001.dat
					zip.file("res00001.dat", Output);
					file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00002.dat", false);
					file.send();
					// Adds res0002.dat to file
					zip.file("res00002.dat", file.responseText);
					file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00003.dat", false);
					file.send();
					// Adds res0003.dat to file
					zip.file("res00003.dat", file.responseText);
					file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00004.dat", false);
					file.send();
					// Adds res0004.dat to file
					zip.file("res00004.dat", file.responseText);
					file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00005.dat", false);
					file.send();
					// Adds res0005.dat to file
					zip.file("res00005.dat", file.responseText);
					file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/bb-package-info.txt", false);
					file.send();
					// Adds .bb-package-info to file
					zip.file(".bb-package-info", file.responseText);
					file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/imsmanifest.xml", false);
					file.send();
					// Adds ismanifest.xml to file
					zip.file("imsmanifest.xml", file.responseText);
					// Generates and outputs zip file
					zip.generateAsync({type:"blob"})
					.then(function (blob) 
					{
						saveAs(blob, "BlackboardPool.zip");
					});
				}
				else
				{
					for(a = 1; a < variables.length - 1; a++)
					{
						// Adds new item node for each question
						xmlDoc.getElementsByTagName("section")[0].appendChild(xmlDoc.getElementsByTagName("item")[0].cloneNode(true));
					}
					// For loop to run for all questions
					for(q = 1; q < variables.length; q++)
					{
						// Brings in current input from question input box and runs markdown conversion
						var qvalue = marked(document.getElementById("QInput").value);
						// Brings in current input from incorrect answer input box and runs markdown conversion
						var ifvalue = marked(document.getElementById("IFInput").value);
						// Brings in current input from correct answer input box and runs markdown conversion
						var cfvalue = marked(document.getElementById("CFInput").value);
						// Brings in current input from numerical answer input box
						var anvalue = document.getElementById("ANInput").value;
						// Brings in current input from error intput box
						var evalue = document.getElementById("EInput").value;
						// Only runs if some variables are present
						if (variables[0].length != 0)
						{
							// For loop to run for all currently active variables
							for (i = 0; i < variables[0].length; i++) 
							{
								// Looks up the placeholder of each variable being used
								var placeholder = "{{" + variables[0][i] + "}}";
								// While loop to only run until no more instances of the variable are found in question box
								while (qvalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = qvalue.search(placeholder);
									// Creates new string with random variable added
									qvalue = qvalue.substr(0, index) + variables[q][i] + qvalue.substr(index + placeholder.length);
								}
								// While loop to only run until no more instances of the variable are found in answer box
								while (ifvalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = ifvalue.search(placeholder);
									// Creates new string with random variable added
									ifvalue = ifvalue.substr(0, index) + variables[q][i] + ifvalue.substr(index + placeholder.length);
								}
								// While loop to only run until no more instances of the variable are found in answer box
								while (cfvalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = cfvalue.search(placeholder);
									// Creates new string with random variable added
									cfvalue = cfvalue.substr(0, index) + variables[q][i] + cfvalue.substr(index + placeholder.length);
								}
								// While loop to only run until no more instances of the variable are found in numerical answer box
								while (anvalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = anvalue.search(placeholder);
									// Creates new string with random variable added
									anvalue = anvalue.substr(0, index) + variables[q][i] + anvalue.substr(index + placeholder.length);
								}
								// While loop to only run until no more instances of the variable are found in error box
								while (evalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = evalue.search(placeholder);
									// Creates new string with random variable added
									evalue = evalue.substr(0, index) + variables[q][i] + evalue.substr(index + placeholder.length);
								}
							}
						}
						// While loop to replace all <
						while(qvalue.search("<") !== -1)
						{
							// Finds index for random value identifier
							var index = qvalue.search("<");
							// Creates new string with random variable added
							qvalue = qvalue.substr(0, index) + "&lt;" + qvalue.substr(index + 1);
						}
						// While loop to replace all >
						while(qvalue.search(">") !== -1)
						{
							// Finds index for random value identifier
							var index = qvalue.search(">");
							// Creates new string with random variable added
							qvalue = qvalue.substr(0, index) + "&gt;" + qvalue.substr(index + 1);
						}
						// While loop to replace all <
						while(ifvalue.search("<") !== -1)
						{
							// Finds index for random value identifier
							var index = ifvalue.search("<");
							// Creates new string with random variable added
							ifvalue = ifvalue.substr(0, index) + "&lt;" + ifvalue.substr(index + 1);
						}
						// While loop to replace all >
						while(ifvalue.search(">") !== -1)
						{
							// Finds index for random value identifier
							var index = ifvalue.search(">");
							// Creates new string with random variable added
							ifvalue = ifvalue.substr(0, index) + "&gt;" + ifvalue.substr(index + 1);
						}
						// While loop to replace all <
						while(cfvalue.search("<") !== -1)
						{
							// Finds index for random value identifier
							var index = cfvalue.search("<");
							// Creates new string with random variable added
							cfvalue = cfvalue.substr(0, index) + "&lt;" + cfvalue.substr(index + 1);
						}
						// While loop to replace all >
						while(cfvalue.search(">") !== -1)
						{
							// Finds index for random value identifier
							var index = cfvalue.search(">");
							// Creates new string with random variable added
							cfvalue = cfvalue.substr(0, index) + "&gt;" + cfvalue.substr(index + 1);
						}
						// Adds question text to xml as well as MathJax
						xmlDoc.getElementsByTagName("mat_formattedtext")[(3 * q) - 1].innerHTML = qvalue + '&lt;script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"&gt;&lt;/script&gt;';
						// Adds incorrect answer feedback to xml
						xmlDoc.getElementsByTagName("mat_formattedtext")[(3 * q) + 1].innerHTML = ifvalue;
						// Adds correct answer feedback to xml
						xmlDoc.getElementsByTagName("mat_formattedtext")[3 * q].innerHTML = cfvalue;
						// Adds answer to xml
						xmlDoc.getElementsByTagName("varequal")[q - 1].innerHTML = eval(anvalue);
						if (evalue.length == 0)
						{
							// Adds answer - error to xml
							xmlDoc.getElementsByTagName("vargte")[q - 1].innerHTML = eval(anvalue);
							// Adds answer + error to xml
							xmlDoc.getElementsByTagName("varlte")[q - 1].innerHTML = eval(anvalue);

						}
						else 
						{
							// Adds answer - error to xml
							xmlDoc.getElementsByTagName("vargte")[q - 1].innerHTML = eval(anvalue) - eval(evalue);
							// Adds answer + error to xml
							xmlDoc.getElementsByTagName("varlte")[q - 1].innerHTML = eval(anvalue) + eval(evalue);
						}
					}
					// Sets output to a string
					var Output = new XMLSerializer().serializeToString(xmlDoc);
					// Sets up zip file
					var zip = new JSZip();
					// Adds output to zip file as res00001.dat
					zip.file("res00001.dat", Output);
					file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00002.dat", false);
					file.send();
					// Adds res0002.dat to file
					zip.file("res00002.dat", file.responseText);
					file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00003.dat", false);
					file.send();
					// Adds res0003.dat to file
					zip.file("res00003.dat", file.responseText);
					file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00004.dat", false);
					file.send();
					// Adds res0004.dat to file
					zip.file("res00004.dat", file.responseText);
					file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/res00005.dat", false);
					file.send();
					// Adds res0005.dat to file
					zip.file("res00005.dat", file.responseText);
					file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/bb-package-info.txt", false);
					file.send();
					// Adds .bb-package-info to file
					zip.file(".bb-package-info", file.responseText);
					file.open("GET", "https://chris14552249.github.io/TiF/TestingXML/imsmanifest.xml", false);
					file.send();
					// Adds ismanifest.xml to file
					zip.file("imsmanifest.xml", file.responseText);
					// Generates and outputs zip file
					zip.generateAsync({type:"blob"})
					.then(function (blob) 
					{
						saveAs(blob, "BlackboardPool.zip");
					});
				}
			}

			// Function to generate random variables
			function rand()
			{	
				// Sets up each row in array
				ranvariables = new Array(parseInt(document.getElementById("NoQuestions").value));
				for (var i = 0; i < ranvariables.length; i++)
				{
					// Set each row in array to have the correct number of columns
					ranvariables[i] = new Array(numvar);
				}
				// For loop to run for required number of questions
				for(q = 0; q < ranvariables.length; q++)
				{
					// For loop to run for number of variables
					for(i = 1; i <= numvar; i++)
					{
						// Brings in min for random variables
						var min = document.getElementById("Var" + i + "minval").value;
						// Brings in max for random variables
						var max = document.getElementById("Var" + i + "maxval").value;
						// Brings in accuracy for random variables
						var acc = document.getElementById("Var" + i + "decval").value;
						// Generates random number with desired attributes
						var rand = parseFloat(Math.random() * (max - min) + +min);
						// Sets appropriate variable element to random number
						ranvariables[q][i] = rand.toFixed(acc);
					}
				}
			}
			
			// Function to save question data for later
			function SaveQs()
			{
				// Brings in inputs from relevant boxes
				var Output = document.getElementById("TInput").value + "TITLE BREAK";
				Output += document.getElementById("QInput").value + "QUESTION BREAK";
				Output += document.getElementById("IFInput").value + "IANSWER BREAK";
				Output += document.getElementById("CFInput").value + "CANSWER BREAK";
				Output += document.getElementById("ANInput").value + "NUMERICAL BREAK";
				Output += document.getElementById("EInput").value + "ERROR BREAK";
				Output += numvar;
				for(i = 1; i <= numvar; i++)
				{
					// Brings in placeholder for random variables
					var placeholder = document.getElementById("Var" + i + "name").value;
					// Brings in min for random variables
					var min = document.getElementById("Var" + i + "minval").value;
					// Brings in max for random variables
					var max = document.getElementById("Var" + i + "maxval").value;
					// Brings in accuracy for random variables
					var acc = document.getElementById("Var" + i + "decval").value;
					// Saves each of the variables attributes to output
					Output += " " + placeholder + " " + min + " " + max + " " + acc;
				}
				// Creates temporary blob file
				var File = new Blob([Output], {type:'text/plain'});
				// Provides file name for file
				var FileName = "BlackboardQuestions.txt";
				//Creates download element
				var Download = document.createElement("a");
				Download.download = FileName;
				Download.innerHTML = "Download File";
				// For all browsers except Firefox
				if (window.URL != null)
				{
					Download.href = window.URL.createObjectURL(File);
				}
				// For Firefox browser to work
				else
				{
					Download.href = window.URL.createObjectURL(File);
					Download.onclick = destroyClickedElement;
					Download.style.display = "none";
					document.body.appendChild(Download);
				}
				// Starts download of file
				Download.click();
				// Updates save time
				SaveTime = Date.now();
			}
			
			function update()
			{
				// Checks if Rand variable set is in use
				if(document.getElementById("VarSet").value == "Rand")
				{
					// Brings in current input from question input box and runs markdown conversion
					var qvalue = marked(document.getElementById("QInput").value);
					// Brings in current input from ianswer input box and runs markdown conversion
					var ifvalue = marked(document.getElementById("IFInput").value);
					// Brings in current input from canswer input box and runs markdown conversion
					var cfvalue = marked(document.getElementById("CFInput").value);
					// Brings in current input from numerical answer intput box
					var anvalue = document.getElementById("ANInput").value;
					// If loop to only update if some variables are active
					if (numvar != 0)
					{
						// Runs rand function to update variable array
						rand();
						// Changes question output box to show markdown of question input
						document.getElementById("QMarked").innerHTML = qvalue;
						// Changes answer output box to show markdown of ianswer input
						document.getElementById("AIMarked").innerHTML = ifvalue;
						// Changes answer output box to show markdown of canswer input
						document.getElementById("ACMarked").innerHTML = cfvalue;
						// For loop to run for all currently active variables
						for (i = 1; i <= numvar; i++) 
						{
							// Brings in current output from question output box
							var qvalue = document.getElementById("QMarked").innerHTML;
							// Brings in current output from ianswer output box
							var ifvalue = document.getElementById("AIMarked").innerHTML;
							// Brings in current output from canswer output box
							var cfvalue = document.getElementById("ACMarked").innerHTML;
							// Looks up the placeholder of each variable being used
							var placeholder = "{{" + document.getElementById("Var" + i + "name").value + "}}";
							// While loop to only run until no more instances of the variable are found in question box
							while (qvalue.search(placeholder) !== -1)
							{
								// Finds index for random value identifier
								var index = qvalue.search(placeholder);
								// Creates new string with random variable added
								qvalue = qvalue.substr(0, index) + ranvariables[0][i] + qvalue.substr(index + placeholder.length);
								document.getElementById("QMarked").innerHTML = qvalue;
							}
							// While loop to only run until no more instances of the variable are found in ianswer box
							while (ifvalue.search(placeholder) !== -1)
							{
								// Finds index for random value identifier
								var index = ifvalue.search(placeholder);
								// Creates new string with random variable added
								ifvalue = ifvalue.substr(0, index) + ranvariables[0][i] + ifvalue.substr(index + placeholder.length);
								document.getElementById("AIMarked").innerHTML = ifvalue;
							}
							// While loop to only run until no more instances of the variable are found in canswer box
							while (cfvalue.search(placeholder) !== -1)
							{
								// Finds index for random value identifier
								var index = cfvalue.search(placeholder);
								// Creates new string with random variable added
								cfvalue = cfvalue.substr(0, index) + ranvariables[0][i] + cfvalue.substr(index + placeholder.length);
								document.getElementById("ACMarked").innerHTML = cfvalue;
							}
							// While loop to only run until no more instances of the variable are found in numerical answer box
							while (anvalue.search(placeholder) !== -1)
							{
								// Finds index for random value identifier
								var index = anvalue.search(placeholder);
								// Creates new string with random variable added
								anvalue = anvalue.substr(0, index) + ranvariables[0][i] + anvalue.substr(index + placeholder.length);
							}
						}
						if(eval(anvalue) == null)
						{
							document.getElementById("ANMarked").innerHTML = "";
						}
						else
						{
							document.getElementById("ANMarked").innerHTML = eval(anvalue);
						}
					}
					else
					{
						// Changes question output box to show markdown of question input
						document.getElementById("QMarked").innerHTML = qvalue;
						// Changes answer output box to show markdown of ianswer input
						document.getElementById("AIMarked").innerHTML = ifvalue;
						// Changes answer output box to show markdown of canswer input
						document.getElementById("ACMarked").innerHTML = cfvalue;
						// Brings in current input from numerical answer intput box and sets output to match
						if(eval(anvalue) == null)
						{
							document.getElementById("ANMarked").innerHTML = "";
						}
						else
						{
							document.getElementById("ANMarked").innerHTML = eval(anvalue);
						}
					}
					if(document.getElementById("EInput").value != "")
					{	
						// Gets error input value from box
						var evalue = document.getElementById("EInput").value;
						// For loop to run for all currently active variables
						for (i = 1; i <= numvar; i++) 
						{
							// Looks up the placeholder of each variable being used
							var placeholder = "{{" + document.getElementById("Var" + i + "name").value + "}}";
							// Gets value of variable from array
							var value = ranvariables[0][i];
							// While loop to only run until no more instances of the variable are found in error box
							while (evalue.search(placeholder) !== -1)
							{
								// Finds index for random value identifier
								var index = evalue.search(placeholder);
								// Creates new string with random variable added
								evalue = evalue.substr(0, index) + value + evalue.substr(index + placeholder.length);
							}
						}	
						// Sets Numerical answer output to include error
						document.getElementById("ANMarked").innerHTML = document.getElementById("ANMarked").innerHTML + " &#177 " + eval(evalue);
					}
				}
				else
				{
					// Brings in current input from question input box and runs markdown conversion
					var qvalue = marked(document.getElementById("QInput").value);
					// Brings in current input from ianswer input box and runs markdown conversion
					var ifvalue = marked(document.getElementById("IFInput").value);
					// Brings in current input from canswer input box and runs markdown conversion
					var cfvalue = marked(document.getElementById("CFInput").value);
					// Brings in current input from numerical answer intput box
					var anvalue = document.getElementById("ANInput").value;
					// If loop to check if csv file exists
					if(document.getElementById("CSV") != "")
					{
						// Runs data function to make sure CSV variables are being used
						data();
						// If loop to only update if some variables are active
						if (variables.length != 0)
						{
							// Changes question output box to show markdown of question input
							document.getElementById("QMarked").innerHTML = qvalue;
							// Changes answer output box to show markdown of answer input
							document.getElementById("AMarked").innerHTML = fvalue;
							// For loop to run for all currently active variables
							for (i = 0; i < variables[0].length; i++) 
							{
								// Brings in current output from question output box
								var qvalue = document.getElementById("QMarked").innerHTML;
								// Brings in current output from ianswer output box
								var ifvalue = document.getElementById("AIMarked").innerHTML;
								// Brings in current output from canswer output box
								var cfvalue = document.getElementById("ACMarked").innerHTML;
								// Looks up the placeholder of each variable being used
								var placeholder = "{{" + variables[0][i] + "}}";
								// Gets value of variable from array
								var value = variables[1][i];
								// While loop to only run until no more instances of the variable are found in question box
								while (qvalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = qvalue.search(placeholder);
									// Creates new string with random variable added
									qvalue = qvalue.substr(0, index) + value + qvalue.substr(index + placeholder.length);
									document.getElementById("QMarked").innerHTML = qvalue;
								}
								// While loop to only run until no more instances of the variable are found in answer box
								while (ifvalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = ifvalue.search(placeholder);
									// Creates new string with random variable added
									ifvalue = ifvalue.substr(0, index) + value + ifvalue.substr(index + placeholder.length);
									document.getElementById("AIMarked").innerHTML = ifvalue;
								}
								// While loop to only run until no more instances of the variable are found in answer box
								while (cfvalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = cfvalue.search(placeholder);
									// Creates new string with random variable added
									cfvalue = cfvalue.substr(0, index) + value + cfvalue.substr(index + placeholder.length);
									document.getElementById("ACMarked").innerHTML = cfvalue;
								}
								// While loop to only run until no more instances of the variable are found in numerical answer box
								while (anvalue.search(placeholder) !== -1)
								{
									// Finds index for random value identifier
									var index = anvalue.search(placeholder);
									// Creates new string with random variable added
									anvalue = anvalue.substr(0, index) + value + anvalue.substr(index + placeholder.length);
								}
							}
							if(eval(anvalue) == null)
							{
								document.getElementById("ANMarked").innerHTML = "";
							}
							else
							{
								document.getElementById("ANMarked").innerHTML = eval(anvalue);
							}
						}
						else
						{
							// Changes question output box to show markdown of question input
							document.getElementById("QMarked").innerHTML = qvalue;
							// Changes ianswer output box to show markdown of ianswer input
							document.getElementById("AIMarked").innerHTML = ifvalue;
							// Changes canswer output box to show markdown of canswer input
							document.getElementById("ACMarked").innerHTML = cfvalue;
							// Brings in current input from numerical answer intput box and sets output to match
							if(eval(anvalue) == null)
							{
								document.getElementById("ANMarked").innerHTML = "";
							}
							else
							{
								document.getElementById("ANMarked").innerHTML = eval(anvalue);
							}
						}
					}
					else
					{
						// Changes question output box to show markdown of question input
						document.getElementById("QMarked").innerHTML = qvalue;
						// Changes ianswer output box to show markdown of ianswer input
						document.getElementById("AIMarked").innerHTML = ifvalue;
						// Changes canswer output box to show markdown of canswer input
						document.getElementById("ACMarked").innerHTML = cfvalue;
						// Brings in current input from numerical answer intput box and sets output to match
						if(eval(anvalue) == null)
						{
							document.getElementById("ANMarked").innerHTML = "";
						}
						else
						{
							document.getElementById("ANMarked").innerHTML = eval(anvalue);
						}
					}
					if(document.getElementById("EInput").value != "")
					{
						// Gets error input value from box
						var evalue = document.getElementById("EInput").value;
						// For loop to run for all currently active variables
						for (i = 0; i < variables[0].length; i++) 
						{
							// Looks up the placeholder of each variable being used
							var placeholder = "{{" + variables[0][i] + "}}";
							// Gets value of variable from array
							var value = variables[1][i];
							// While loop to only run until no more instances of the variable are found in error box
							while (evalue.search(placeholder) !== -1)
							{
								// Finds index for random value identifier
								var index = evalue.search(placeholder);
								// Creates new string with random variable added
								evalue = evalue.substr(0, index) + value + evalue.substr(index + placeholder.length);
							}
						}
						// Sets Numerical answer output to include error
						document.getElementById("ANMarked").innerHTML = document.getElementById("ANMarked").innerHTML + " &#177 " + eval(evalue);
					}
				}
				MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
			}
			
			function updatevar(box)
			{
				var newnumvar = box.value;
				// Checks if the number of variables has been changed
				if(numvar != newnumvar || loaded)
				{
					numvar = newnumvar;
					if(numvar == 0)
					{
						// For loop to hide all sections
						for (i = 1; i <= 10; i++)
						{
							document.getElementById("Var" + i + "head").style.display = "none";
							document.getElementById("Var" + i + "min").style.display = "none";
							document.getElementById("Var" + i + "max").style.display = "none";
							document.getElementById("Var" + i + "dec").style.display = "none";
						}
					}
					else
					{
						// For loop to hide all sections
						for (i = 1; i <= 10; i++)
						{
							document.getElementById("Var" + i + "head").style.display = "none";
							document.getElementById("Var" + i + "min").style.display = "none";
							document.getElementById("Var" + i + "max").style.display = "none";
							document.getElementById("Var" + i + "dec").style.display = "none";
						}
						// For loop to show necessary sections
						for (i = 1; i <= numvar; i++) 
						{
							document.getElementById("Var" + i + "head").style.display = "inline-block";
							document.getElementById("Var" + i + "min").style.display = "inline-block";
							document.getElementById("Var" + i + "max").style.display = "inline-block";
							document.getElementById("Var" + i + "dec").style.display = "inline-block";
						}

					}
					loaded = false;
				}
				update();
			}
			
			// Function to check if a user has saved before leaving, note that the return messages dont display in some browsers as they have default messages
			window.onbeforeunload = function() 
			{
				// Checks if user has entered any content
				if (document.getElementById("QInput").value != "" || document.getElementById("IFInput").value != "" || document.getElementById("CFInput").value != "" ) 
				{
					// Checks if more than 10 seconds have passed since user last saved
					if (((Date.now() - SaveTime) / 1000) > 10)
					{
						// Tells user how long it has been since they last saved
						return "It has been " + (Date.now() - SaveTime) / 1000 + " seconds since you have saved, if you have edited anything since then please go back and save again.";
					}
					else if (SaveTime == 0)
					{
						// Tells user they havent saved there work at all
						return "You have entered data without saving, please make sure you have saved any work before leaving.";
					}
					else
					{
						// Returns nothing if user has saved in last 10 seconds
						return;
					}
				} 
				else
				{
					return;
				}
			};
		</script>
		<script type="text/x-mathjax-config;executed=true">
			MathJax.Hub.Config(
			{
				tex2jax: 
				{
					inlineMath: [ ['$','$'], ["\\(","\\)"] ],
					displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
					processEscapes: true,
					processEnvironments: true
				},
				displayAlign: 'center',
				"HTML-CSS": 
				{
					styles: {'.MathJax_Display': {"margin": 0}},
					linebreaks: { automatic: true }
				}
			});
		</script>
		
		<!-- Placeholder and script to load footer -->
		<div id="footer-placeholder"></div>
		<script>
		$(function()
		{
			$("#footer-placeholder").load("https://chris14552249.github.io/TiF/footer.html");
		});
		</script>
	</body>
</html>
