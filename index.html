<!DOCTYPE html>
<html>
    <head>
		<title>TiF</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<style>
		</style>
	</head>
	
  <body>
  	<!-- Text area to input text -->
	<textarea maxlength="500" "rows="10" cols="50" id = "QInput"></textarea>
	<!-- Button to add in a random number identifier -->
	<input id="RandomButton" type="button" value="Random" onclick="Random();" />
	<!-- Box to input desired random number accuracy -->
	<input type="number" id="RandomAccuracy" value="2">
	 <!-- Button to convert question -->
	<input id="ConvertButton" type="button" value="Convert" onclick="Convert();" />
	<!-- Text area to show coded question -->
	<textarea maxlength="500" "rows="10" cols="50" id = "Converted"></textarea>
	 <!-- Button to initiate download -->
	<input id="DownloadButton" type="button" value="Download" onclick="OutputFile();" />
  
	<script>
		function Random()
		{
			document.getElementById("QInput").value = document.getElementById("QInput").value + "(random)";
		}
		function Convert()
		{
			//Brings in input from question input box
			var value = document.getElementById("QInput").value;
			while(value.search("(random)") != -1)
			{
				RanGen(value);
			}

			document.getElementById("Converted").value = value;
		}
		function RanGen(value)
		{
			// Finds index for random value identifier
			var index = value.search("(random)");
			// Brings in accuracy for random variables
			var acc = document.getElementById("RandomAccuracy").value;
			// Creates new string with random variable added
			value = value.substr(0, index - 1) + Math.random().toFixed(acc) + value.substr(index + 7);
			return value;
		}
		function OutputFile()
		{
			// Brings in Output from converted box
			var Output = document.getElementById("Converted").value;
			// Creates temporary blob file
			var File = new Blob([Output], {type:'text/plain'});
			// Provides file name for file
			var FileName = "test.dat";
			//Creates download element
			var Download = document.createElement("a");
			Download.download = FileName;
			Download.innerHTML = "Download File";
			// For all browsers except Firefox
			if (window.URL != null)
			{
				Download.href = window.URL.createObjectURL(File);
			}
			// For Firefox browser to work
			else
			{
				Download.href = window.URL.createObjectURL(File);
				Download.onclick = destroyClickedElement;
				Download.style.display = "none";
				document.body.appendChild(Download);
			}
			// Starts download of file
			Download.click();
		}
	</script>
	</body>
</html>
