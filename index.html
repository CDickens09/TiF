<!DOCTYPE html>
<html>
    <head>
		<title>TiF</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://chris14552249.github.io/TiF/generalstyle.css">
		<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="https://unpkg.com/marked@0.3.6"></script>
		<script src="https://unpkg.com/lodash@4.16.0"></script>
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
		<style>
		</style>
	</head>

	<body>
		<!-- Placeholder and script to load navbar -->
		<div id="navigation-placeholder"></div>
		<script>
		$(function()
		{
			$("#navigation-placeholder").load("https://chris14552249.github.io/TiF/navigation.html");
		});
		</script>
		
		<!-- Header for page and link to instructions -->
		<div class="header">
			<h1>BlackBoard Question Pool Maker</h1>
			<p>
				To view instruction please visit the <a href="/TiF/Help">Help</a> page 
			</p>
		</div>
		
		<!-- Row to show question box headers-->
		<div class="row">
			<div class="column iheaders">
				Question Input:
			</div>
			<div class="column iheaders">
				Question Output:
			</div>
		</div>
		
		<!-- Row to show question boxs-->
		<div class="row">
			<div class="column inputs">
				<div id="questions">
					<textarea id = "QInput" :value="input" @input="update"></textarea>
					<div id = "QMarked" style="overflow:auto" v-html="compiledMarkdown"></div>
				</div>
			</div>
		</div>

		<!-- Row to show answer box headers-->
		<div class="row">
			<div class="column iheaders">
				Answer Input:
			</div>
			<div class="column iheaders">
				Answer Output:
			</div>
		</div>
		
		<!-- Row to show answer boxs-->
		<div class="row">
			<div class="column inputs">
				<div id="answers">
					<textarea id = "AInput" :value="input" @input="update"></textarea>
					<div id = "AMarked" style="overflow:auto" v-html="compiledMarkdown"></div>
				</div>
			</div>
			<div class="column buttons">
				<!-- Button to initiate download -->
				<input style="width:100%" id="DownloadButton" type="button" value="Download" onclick="OutputFile();" />
			</div>
		</div>

		<!-- Row to show variable heading-->
		<div class="row">
			<div class="settings">
				Number of Variables:
			</div>
		</div>
		
		<!-- Row to show number of variables-->
		<div class="row">
			<div class="settings">
				<input type="number" id="NumVar" value="0" oninput="updatevar(this)" max="10">				
			</div>
		</div>
		
		<!-- Row for variable names to be set in-->
		<div class="row" id="Variable headers">
			<div class="settings" id="Var1head" style="display:none;">
				Variable Placeholder:
				<input type="text" id="Var1name" value="{{Var1}}">
			</div>
			<div class="settings" id="Var2head" style="display:none;">
				Variable Placeholder:
				<input type="text" id="Var2name" value="{{Var2}}">
			</div>
			<div class="settings" id="Var3head" style="display:none;">
				Variable Placeholder:
				<input type="text" id="Var3name" value="{{Var3}}">
			</div>
			<div class="settings" id="Var4head" style="display:none;">
				Variable Placeholder:
				<input type="text" id="Var4name" value="{{Var4}}">
			</div>
			<div class="settings" id="Var5head" style="display:none;">
				Variable Placeholder:
				<input type="text" id="Var5name" value="{{Var5}}">
			</div>
			<div class="settings" id="Var6head" style="display:none;">
				Variable Placeholder:
				<input type="text" id="Var6name" value="{{Var6}}">
			</div>
			<div class="settings" id="Var7head" style="display:none;">
				Variable Placeholder:
				<input type="text" id="Var7name" value="{{Var7}}">
			</div>
			<div class="settings" id="Var8head" style="display:none;">
				Variable Placeholder:
				<input type="text" id="Var8name" value="{{Var8}}">
			</div>
			<div class="settings" id="Var9head" style="display:none;">
				Variable Placeholder:
				<input type="text" id="Var9name" value="{{Var9}}">
			</div>
			<div class="settings" id="Var10head" style="display:none;">
				Variable Placeholder:
				<input type="text" id="Var10name" value="{{Var10}}">
			</div>
		</div>
		
		<!-- Row for variable mins to be set in-->
		<div class="row" id="Variable mins">
			<div class="settings" id="Var1min" style="display:none;">
				Min: 
				<input type="number" value="0">
			</div>
			<div class="settings" id="Var2min" style="display:none;">
				Min: 
				<input type="number" value="0">
			</div>
			<div class="settings" id="Var3min" style="display:none;">
				Min: 
				<input type="number" value="0">
			</div>
			<div class="settings" id="Var4min" style="display:none;">
				Min: 
				<input type="number" value="0">
			</div>
			<div class="settings" id="Var5min" style="display:none;">
				Min: 
				<input type="number" value="0">
			</div>
			<div class="settings" id="Var6min" style="display:none;">
				Min: 
				<input type="number" value="0">
			</div>
			<div class="settings" id="Var7min" style="display:none;">
				Min: 
				<input type="number" value="0">
			</div>
			<div class="settings" id="Var8min" style="display:none;">
				Min: 
				<input type="number" value="0">
			</div>
			<div class="settings" id="Var9min" style="display:none;">
				Min: 
				<input type="number" value="0">
			</div>
			<div class="settings" id="Var10min" style="display:none;">
				Min: 
				<input type="number" value="0">
			</div>
		</div>
		
		<!-- Row for variable maxs to be set in-->
		<div class="row" id="Variable maxs">
			<div class="settings" id="Var1max" style="display:none;">
				Max: 
				<input type="number" value="1">
			</div>
			<div class="settings" id="Var2max" style="display:none;">
				Max: 
				<input type="number" value="1">
			</div>
			<div class="settings" id="Var3max" style="display:none;">
				Max: 
				<input type="number" value="1">
			</div>
			<div class="settings" id="Var4max" style="display:none;">
				Max: 
				<input type="number" value="1">
			</div>
			<div class="settings" id="Var5max" style="display:none;">
				Max: 
				<input type="number" value="1">
			</div>
			<div class="settings" id="Var6max" style="display:none;">
				Max: 
				<input type="number" value="1">
			</div>
			<div class="settings" id="Var7max" style="display:none;">
				Max: 
				<input type="number" value="1">
			</div>
			<div class="settings" id="Var8max" style="display:none;">
				Max: 
				<input type="number" value="1">
			</div>
			<div class="settings" id="Var9max" style="display:none;">
				Max: 
				<input type="number" value="1">
			</div>
			<div class="settings" id="Var10max" style="display:none;">
				Max: 
				<input type="number" value="1">
			</div>
		</div>
		
		<!-- Row for variable decimal accuracies to be set in-->
		<div class="row" id="Variable decs">
			<div class="settings" id="Var1dec" style="display:none;">
				Decimals: 
				<input type="number" value="2">
			</div>
			<div class="settings" id="Var2dec" style="display:none;">
				Decimals: 
				<input type="number" value="2">
			</div>
			<div class="settings" id="Var3dec" style="display:none;">
				Decimals: 
				<input type="number" value="2">
			</div>
			<div class="settings" id="Var4dec" style="display:none;">
				Decimals: 
				<input type="number" value="2">
			</div>
			<div class="settings" id="Var5dec" style="display:none;">
				Decimals: 
				<input type="number" value="2">
			</div>
			<div class="settings" id="Var6dec" style="display:none;">
				Decimals: 
				<input type="number" value="2">
			</div>
			<div class="settings" id="Var7dec" style="display:none;">
				Decimals: 
				<input type="number" value="2">
			</div>
			<div class="settings" id="Var8dec" style="display:none;">
				Decimals: 
				<input type="number" value="2">
			</div>
			<div class="settings" id="Var9dec" style="display:none;">
				Decimals: 
				<input type="number" value="2">
			</div>
			<div class="settings" id="Var10dec" style="display:none;">
				Decimals: 
				<input type="number" value="2">
			</div>
		</div>
		
		<script>
			// Sets initial number of variables to 0
			var numvar = 0;
			
			function updatevar(box)
			{
				var newnumvar = box.value;
				// Checks if the number of variables has been changed
				if(numvar != newnumvar)
				{
					numvar = newnumvar;
					if(numvar == 0)
					{
						// For loop to hide all sections
						for (i = 1; i <= 10; i++)
						{
							document.getElementById("Var" + i + "head").style.display = "none";
							document.getElementById("Var" + i + "min").style.display = "none";
							document.getElementById("Var" + i + "max").style.display = "none";
							document.getElementById("Var" + i + "dec").style.display = "none";
						}
					}
					else
					{
						// For loop to hide all sections
						for (i = 1; i <= 10; i++)
						{
							document.getElementById("Var" + i + "head").style.display = "none";
							document.getElementById("Var" + i + "min").style.display = "none";
							document.getElementById("Var" + i + "max").style.display = "none";
							document.getElementById("Var" + i + "dec").style.display = "none";
						}
						// For loop to show necessary sections
						for (i = 1; i <= numvar; i++) 
						{
							document.getElementById("Var" + i + "head").style.display = "inline-block";
							document.getElementById("Var" + i + "min").style.display = "inline-block";
							document.getElementById("Var" + i + "max").style.display = "inline-block";
							document.getElementById("Var" + i + "dec").style.display = "inline-block";
						}

					}
				}
			}
			
			//function Convert(input, output)
			//{
			//	// Brings in current output from question output box
			//	var value = document.getElementById(input).value
			//	document.getElementById(output).value = value;
			//	while (value.search("random") !== -1)
			//	{
			//		// Finds index for random value identifier
			//		var index = value.search("random");
			//		// Brings in accuracy for random variables
			//		var acc = document.getElementById("RandomAccuracy").value;
			//		// Creates new string with random variable added
			//		value = value.substr(0, index) + Math.random().toFixed(acc) + value.substr(index + 6);
			//		document.getElementById(output).value = value;
			//	}
			//}	
			
			//function update(box)
			//{
			//	// If loop to check whether the box being updated is the question or answer row
			//	if (box.id.search("Q") == -1)
			//	{
			//		var input = "AInput";
			//		var output = "AConverted";
			//	}
			//	else 
			//	{
			//		var input = "QInput";
			//		var output = "QConverted";
			//	}
			//	// Runs the convert function with the desired input and outputs
			//	Convert(input, output)
			//}
			
			function OutputFile()
			{
				// Brings in Output from converted box
				var Output = document.getElementById("Converted").value;
				// Creates temporary blob file
				var File = new Blob([Output], {type:'text/plain'});
				// Provides file name for file
				var FileName = "test.dat";
				//Creates download element
				var Download = document.createElement("a");
				Download.download = FileName;
				Download.innerHTML = "Download File";
				// For all browsers except Firefox
				if (window.URL != null)
				{
					Download.href = window.URL.createObjectURL(File);
				}
				// For Firefox browser to work
				else
				{
					Download.href = window.URL.createObjectURL(File);
					Download.onclick = destroyClickedElement;
					Download.style.display = "none";
					document.body.appendChild(Download);
				}
				// Starts download of file
				Download.click();
			}
			
			// Uses vue element to live update the question boxes
			new Vue({
				el: '#questions',
				data: {
					input: ''
				},
				computed: {
					compiledMarkdown: function () {
						return marked(this.input, { sanitize: true });
					}
				},
				methods: {
					update: _.debounce(function (e) {
						this.input = e.target.value
					}, 300)
				}
			})
			
			// Uses vue element to live update the answer boxes
			new Vue({
				el: '#answers',
				data: {
					input: ''
				},
				computed: {
					compiledMarkdown: function () {
						return marked(this.input, { sanitize: true });
					}
				},
				methods: {
					update: _.debounce(function (e) {
						this.input = e.target.value
					}, 300)
				}
			})
			
			$("#QMarked p:contains('cat')").html("dog")
		</script>
		
		<!-- Placeholder and script to load footer -->
		<div id="footer-placeholder"></div>
		<script>
		$(function()
		{
			$("#footer-placeholder").load("https://chris14552249.github.io/TiF/footer.html");
		});
		</script>
	</body>
</html>
